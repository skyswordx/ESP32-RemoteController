; PlatformIO Project Configuration File
;
;   Build options: build flags, source filter
;   Upload options: custom upload port, speed and extra flags
;   Library options: dependencies, extra library storages
;   Advanced options: extra scripting
;
; Please visit documentation for the other options and examples
; https://docs.platformio.org/page/projectconf.html

[env:esp32dev]
platform = espressif32
board = esp32dev
framework = arduino

board_build.partitions = huge_app.csv

; 编译选项
build_flags = 
    ; ESP32日志级别配置 (0=无日志, 1=错误, 2=警告, 3=信息, 4=调试, 5=详细)
    ; 当前设置为4(调试级别) - 允许ESP_LOGE/ESP_LOGW/ESP_LOGI/ESP_LOGD输出
    -DCORE_DEBUG_LEVEL=4
    ; 低电压检测级别配置 (ESP32硬件保护)
    -DCONFIG_ESP32_BROWNOUT_DET_LVL=2
    ; 启用低电压检测功能
    -DCONFIG_ESP32_BROWNOUT_DET=1
    ; WiFi扫描状态定义
    -DWIFI_SCAN_RUNNING=-1
    -DWIFI_SCAN_FAILED=-2
    ; 电池ADC采样引脚定义
    -DBATTERY_ADC_PIN=36
    ; Arduino主循环任务栈大小(字节)
    -DARDUINO_LOOP_STACK_SIZE=16384
    ; 库文件包含路径配置 - 用于编译时查找头文件
    -I ./lib/UARTParser
    -I ./lib/Wifi
    -I ./lib/DataPlatform
    -I ./lib/Encoder
    -I ./lib/Joystick


; 监视器配置
monitor_speed = 115200
; 串口监视器过滤器 - 用于美化和解析输出
monitor_filters = 
    esp32_exception_decoder  ; ESP32异常信息解码器
    time                     ; 添加时间戳到日志输出

; 库依赖
lib_deps = 
    WiFi                                     ; ESP32内置WiFi库
    esp32-arduino-lib-builder                ; ESP32 Arduino框架构建库
    madhephaestus/ESP32Encoder@^0.10.2       ; 旋转编码器库 - 使用ESP32硬件中断处理编码器信号
    adafruit/Adafruit Unified Sensor@^1.1.14 ; 传感器统一接口库 - 为摇杆和其他传感器提供标准接口
    https://github.com/leezisheng/SerialServo.git ; 串口舵机库 - 支持通过串口控制舵机

; 上传配置
upload_speed = 921600    ; 串口烧录波特率 - 高速上传固件

